# ‚öôÔ∏è Technical Specification - Pensieve

## üèóÔ∏è System Architecture

### **High-Level Architecture**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   File Watcher  ‚îÇ -> ‚îÇ  AI Processor   ‚îÇ -> ‚îÇ Summary Storage ‚îÇ
‚îÇ   (watchdog)    ‚îÇ    ‚îÇ   (Ollama)      ‚îÇ    ‚îÇ  (Local Files)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         |                       |                       |
         v                       v                       v
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Meeting Detect  ‚îÇ    ‚îÇ Content Parser  ‚îÇ    ‚îÇ Web Interface   ‚îÇ
‚îÇ New Transcripts ‚îÇ    ‚îÇ Speaker/Actions ‚îÇ    ‚îÇ (Future Phase)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß Technology Stack

### **Core Components**
- **Language**: Python 3.9+
- **File Monitoring**: `watchdog` library
- **AI Engine**: Ollama + Llama 3.1 8B
- **Text Processing**: `re`, `datetime`, custom parsers
- **Storage**: Local filesystem (Markdown)
- **Logging**: Python `logging` module

### **Dependencies**
```python
# requirements.txt
watchdog>=3.0.0          # File system monitoring
requests>=2.31.0         # HTTP requests to Ollama
python-dateutil>=2.8.0   # Date parsing
pyyaml>=6.0             # Configuration files
rich>=13.0.0            # Beautiful terminal output
```

## üìÅ Project Structure

```
pensieve/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                    # Entry point & orchestrator
‚îÇ   ‚îú‚îÄ‚îÄ monitor/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_watcher.py        # Zoom folder monitoring
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ transcript_detector.py # New file detection
‚îÇ   ‚îú‚îÄ‚îÄ processing/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ transcript_parser.py   # Parse Zoom transcripts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_summarizer.py       # Ollama integration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ content_extractor.py   # Action items, decisions
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ file_manager.py        # Summary organization
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metadata_handler.py    # Meeting metadata
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ config.py              # Configuration management
‚îÇ       ‚îú‚îÄ‚îÄ logger.py              # Logging setup
‚îÇ       ‚îî‚îÄ‚îÄ helpers.py             # Utility functions
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ settings.yaml              # Main configuration
‚îÇ   ‚îî‚îÄ‚îÄ prompts/
‚îÇ       ‚îú‚îÄ‚îÄ summary_template.txt   # AI prompt templates
‚îÇ       ‚îî‚îÄ‚îÄ action_extraction.txt
‚îú‚îÄ‚îÄ memory-bank/                   # Documentation
‚îú‚îÄ‚îÄ summaries/                     # Generated summaries
‚îú‚îÄ‚îÄ tests/                         # Unit tests
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

## üîç Data Flow

### **1. File Detection**
```
Monitor: ~/Documents/Zoom/*/meeting_saved_closed_caption.txt
Trigger: New file creation or modification
Filter: Only process files > 1KB (avoid empty files)
```

### **2. Transcript Parsing**
```python
# Input Format:
[Speaker Name] HH:MM:SS
[Content...]

# Parsed Output:
{
    "meeting_id": "2025-06-13_14-54-20_Multi-supplier-discussions",
    "title": "Multi supplier discussions with Vito",
    "date": "2025-06-13",
    "duration": "45 minutes",
    "participants": ["Aman Ankur", "Vito Corleone"],
    "segments": [
        {
            "speaker": "Aman Ankur",
            "timestamp": "14:54:20",
            "content": "..."
        }
    ]
}
```

### **3. AI Processing Pipeline**
1. **Content Chunking**: Split long transcripts (>2 hours) into 30-min segments
2. **Context Building**: Add meeting metadata to prompts
3. **Summarization**: Generate structured summaries via Ollama
4. **Post-processing**: Extract and format action items
5. **Quality Check**: Flag low-confidence summaries

### **4. Output Generation**
```markdown
# Meeting Summary: [Title] - [Date]

**Duration**: 45 minutes  
**Participants**: Aman Ankur, Vito Corleone  
**Type**: Team Alignment  

## üìã Key Discussion Points
- [AI-generated paragraph summaries]

## ‚úÖ Action Items
- [ ] **@Aman** - Review supplier integration docs - **Due: 2025-06-20** - *Priority: High*
- [ ] **@Vito** - Schedule followup with team - **Due: Next week** - *Priority: Medium*

## üéØ Decisions Made
- [Key decisions with context]

## ‚è≠Ô∏è Next Steps
- [Follow-up items and future meetings]

---
*Generated by Pensieve on 2025-06-13 at 15:02*  
*Source: ~/Documents/Zoom/2025-06-13 14.54.20 Multi supplier discussions with Vito/*
```

## üîí Security & Privacy

### **Data Handling**
- **Local Processing**: All data remains on local machine
- **No Network Calls**: Except to local Ollama instance (localhost:11434)
- **File Permissions**: Summaries inherit source file permissions
- **Encryption**: Optional encryption for sensitive meetings

### **Error Handling**
- **Graceful Degradation**: Continue processing other files if one fails
- **Retry Logic**: Retry failed AI requests up to 3 times
- **Backup Strategy**: Keep original transcripts untouched
- **Logging**: Comprehensive logs for debugging

## ‚ö° Performance Specifications

### **Processing Speed**
- **Small meetings (<30 min)**: 30-60 seconds
- **Medium meetings (30-60 min)**: 1-2 minutes  
- **Large meetings (60+ min)**: 2-5 minutes
- **Parallel Processing**: Handle multiple meetings simultaneously

### **Resource Usage**
- **RAM**: 4-6GB during processing (Ollama model)
- **CPU**: Moderate usage during AI inference
- **Storage**: ~1MB per summary, 100MB per 100 meetings
- **Network**: None (local processing only)

## üß™ Testing Strategy

### **Unit Tests**
- Transcript parsing accuracy
- AI prompt generation
- File organization logic
- Error handling scenarios

### **Integration Tests** 
- End-to-end processing pipeline
- Ollama API integration
- File watcher functionality
- Multi-language content handling

### **Performance Tests**
- Large file processing (2+ hours)
- Concurrent meeting processing
- Memory usage monitoring
- Error recovery testing 