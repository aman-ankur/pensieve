# Pensieve Configuration File
# AI-powered meeting transcript summarization tool

# Monitoring Settings
monitoring:
  zoom_folder: "~/Documents/Zoom"
  file_extensions: [".txt"]
  ignored_folders: ["archive", "temp", ".git"]
  poll_interval: 2.0  # seconds
  watch_patterns: 
    - "*/meeting_saved_closed_caption.txt"
  min_file_size: 1024  # Skip files smaller than 1KB
  check_interval: 2    # Seconds between checks
  file_stable_time: 3  # Wait time to ensure file is complete

# AI Processing Settings
processing:
  # Legacy settings for backward compatibility
  ollama_url: "http://localhost:11434"
  model_name: "llama3.1:8b"       # Fallback/default model
  max_retries: 3
  retry_delay: 5       # Seconds between retries
  request_timeout: 120  # seconds
  
  # New Hybrid AI Strategy
  strategy: "hybrid"   # "cloud_first", "local_only", or "hybrid"
  
  # Model selection for different tasks
  chunk_model: "llama3.1:8b"      # Use better model for chunk processing (was llama3.2:1b)
  synthesis_model: "llama3.1:8b"  # Better model for final synthesis
  
  # Chunking settings for large transcripts
  chunking:
    enabled: true
    max_chunk_size: 2000  # Reduced from 3000 for faster processing
    overlap_size: 100     # Small overlap between chunks

# AI Providers Configuration
ai_providers:
  claude:
    enabled: false  # Set to true when you have API key
    model_name: "claude-3-5-sonnet-20241022"
    api_key: null  # Set your Anthropic API key here or use environment variable ANTHROPIC_API_KEY
    max_tokens: 4000
    temperature: 0.1
    timeout: 120
    priority: 1  # Highest priority (lowest number)
    
    # Privacy settings
    privacy_mode: false  # If true, will not send data to cloud unless explicitly enabled per meeting
    
  ollama:
    enabled: true
    model_name: "llama3.1:8b"
    api_url: "http://localhost:11434"
    temperature: 0.1
    timeout: 120
    priority: 2  # Fallback priority
    
    # Enhanced processing settings
    two_pass_enabled: true    # Enable two-pass processing for better quality
    persona_prompting: true   # Use persona-based prompts
    entity_extraction: true   # Extract entities first, then summarize
    
    # Ollama-specific parameters
    options:
      top_k: 40
      top_p: 0.9
      repeat_penalty: 1.1
      num_ctx: 8192  # Context window size

# Output Settings
output:
  summaries_folder: "./summaries"
  template_file: "config/prompts/summary_template.txt"
  date_format: "%Y-%m-%d"
  time_format: "%H-%M"
  filename_format: "{date}_{time}_{title}_summary.md"
  include_metadata: true
  create_backups: false
  organize_by_date: true
  create_monthly_folders: true
  
  # Include provider information in summary metadata
  include_ai_provider_info: true

# Feature Flags
features:
  multilingual: true           # Handle Hindi/English mixed content
  action_extraction: true      # Extract action items
  priority_detection: true     # Detect priority levels
  calendar_integration: false  # Future feature
  slack_notifications: false  # Future feature
  
  # New hybrid features
  cloud_fallback: true         # Allow fallback to cloud when local fails
  quality_assessment: true     # Assess summary quality and suggest improvements
  adaptive_chunking: true      # Smart chunking based on content structure
  
# Logging Settings  
logging:
  level: "INFO"               # DEBUG, INFO, WARNING, ERROR
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file_rotation: true
  log_file: "./logs/pensieve.log"
  max_file_size: "10MB"
  backup_count: 5
  console_output: true
  
  # Enhanced logging for hybrid system
  log_provider_selection: true   # Log which AI provider was used
  log_processing_metrics: true   # Log detailed performance metrics

# Performance Settings
performance:
  max_concurrent_files: 3     # Process multiple files simultaneously
  memory_limit: "4GB"         # Maximum memory usage
  cpu_limit: 80              # Maximum CPU usage percentage
  cache_summaries: true      # Cache processed summaries
  
  # Provider-specific performance settings
  claude_rate_limit: 50       # Requests per minute for Claude
  ollama_concurrent_limit: 2  # Max concurrent Ollama requests

# Meeting Classification
meeting_types:
  one_on_one:
    keywords: ["1:1", "one-on-one", "weekly sync", "catch up", "check in"]
    priority: "high"
    # Prefer cloud processing for important 1:1s
    preferred_provider: "claude"
  team_meeting:
    keywords: ["team", "standup", "scrum", "daily", "retrospective"]
    priority: "medium"
    preferred_provider: "auto"
  alignment:
    keywords: ["alignment", "sync", "review", "planning", "strategy"]
    priority: "high"
    preferred_provider: "claude"  # Strategic meetings get best AI
  interview:
    keywords: ["interview", "fit", "coding", "system design"]
    priority: "low"
    preferred_provider: "ollama"  # Local processing for candidate privacy
  all_hands:
    keywords: ["all hands", "company", "quarterly", "town hall"]
    priority: "low"
    preferred_provider: "ollama"

# Quality Thresholds
quality:
  # Minimum requirements for summary acceptance
  min_action_items: 0      # Minimum number of action items expected
  min_technical_terms: 3   # Minimum technical terms for engineering meetings
  min_summary_length: 200  # Minimum characters in summary
  
  # Quality scoring weights
  scoring:
    technical_content: 0.4    # Weight for technical content detection
    action_items: 0.3         # Weight for action item extraction
    business_context: 0.2     # Weight for business context capture
    clarity: 0.1             # Weight for summary clarity 